---
import Layout from '../../layouts/Layout.astro';
import { getBlogs, getBlogDetail } from '../../lib/microcms';
import type { Blog } from '../../lib/microcms';

export async function getStaticPaths() {
  const response = await getBlogs({ fields: ['id'] });
  return response.contents.map((content) => ({
    params: { id: content.id },
  }));
}

const { id } = Astro.params;
const blog = await getBlogDetail(id as string);
---

<Layout title={blog.title}>
  <div class="container mx-auto py-8 px-4">
    <h1 class="text-4xl font-bold">{blog.title}</h1>
    <p class="text-gray-600 mt-2">
      公開日: {new Date(blog.publishedAt).toLocaleDateString()}
    </p>
    <div class="prose max-w-none mt-8" set:html={blog.content} />
  </div>
</Layout>

<style is:global>
/*
  Tailwind CSS Typography plugin (`@tailwindcss/typography`) を使うと
  microCMSから返されるHTMLに見栄えの良いスタイルを簡単に適用できます。
  今回は手動で基本的なスタイルを当てています。
*/
.prose h2 {
  font-size: 1.875rem; /* text-3xl */
  font-weight: 700;
  margin-top: 2rem;
  margin-bottom: 1rem;
  border-bottom: 1px solid #e5e7eb; /* gray-200 */
  padding-bottom: 0.5rem;
}
.prose p {
  margin-top: 1.25rem;
  line-height: 1.75;
}
.prose a {
  color: #3b82f6; /* blue-500 */
  text-decoration: underline;
}
.prose a:hover {
  color: #2563eb; /* blue-600 */
}
.prose pre {
  background-color: #1f2937; /* gray-800 */
  color: #d1d5db; /* gray-300 */
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
}
.prose blockquote {
  border-left: 4px solid #d1d5db; /* gray-300 */
  padding-left: 1rem;
  margin-left: 0;
  font-style: italic;
  color: #4b5563; /* gray-600 */
}
</style>
